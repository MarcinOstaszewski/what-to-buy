(this["webpackJsonpwhat-to-buy"]=this["webpackJsonpwhat-to-buy"]||[]).push([[0],{14:function(e,a,t){e.exports={TopMenu:"TopMenu_TopMenu__1GqW0",true:"TopMenu_true__vXCSI"}},15:function(e,a,t){e.exports={checkboxContainer:"ProductWithCheckbox_checkboxContainer__1UHTy",checkmark:"ProductWithCheckbox_checkmark__1RLcK",prodName:"ProductWithCheckbox_prodName__2N05W"}},2:function(e,a,t){e.exports={backDrop:"Modal_backDrop__1X4vu",visible:"Modal_visible__2SMZK",modalWindow:"Modal_modalWindow__16Crz",addCategory:"Modal_addCategory__3qCoV",tabs:"Modal_tabs__ll_uX",showAddCategory:"Modal_showAddCategory__2sz3D",showTabs:"Modal_showTabs__2Rdhd",tab:"Modal_tab__38cSf",addProduct:"Modal_addProduct__2k_IU",deleteProducts:"Modal_deleteProducts__5ArGR",editCategory:"Modal_editCategory__3GXGk",show_addProduct:"Modal_show_addProduct__2PVRr",show_deleteProducts:"Modal_show_deleteProducts__e1m7y",show_editCategory:"Modal_show_editCategory__RWqzW",afterTab:"Modal_afterTab__3nw9Q",newCategoryName:"Modal_newCategoryName__e8lG8",hideBackDrop:"Modal_hideBackDrop__1qf7m",colorSwatchesRow:"Modal_colorSwatchesRow__U6_q_"}},25:function(e,a,t){e.exports=t(42)},30:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var o=t(1),r=t.n(o),c=t(20),n=t.n(c),d=(t(30),t(6)),i=t(11),s=t(16),l=t(21),u=t(22),m=t(24),h=t(23),g=t(14),w=t.n(g),y=function(e){return r.a.createElement("div",{id:"dddafad",className:w.a.TopMenu},r.a.createElement("div",{onClick:e.funcUndoRedo,"data-dir":"u",className:w.a[e.undo],disabled:0===e.undo},"Undo"),r.a.createElement("div",{onClick:e.funcUndoRedo,"data-dir":"r",className:w.a[e.redo],disabled:0===e.redo},"Redo"),r.a.createElement("div",{"data-value":1,onClick:e.changeFontSize},"A+"),r.a.createElement("div",{"data-value":-1,onClick:e.changeFontSize},"a-"))},C=t(8),p=t.n(C),b=function(e){var a;"radio"===e.type&&(a=r.a.createElement("span",{className:p.a.checkmark}));var t,o,c,n=e.width?e.width:12,d=e.disabled;return"switch"===e.type?(o="switch",c="moveHigher",t=r.a.createElement("div",null,r.a.createElement("input",{id:e.id,value:e.value,type:"checkbox",onChange:e.onChange}),r.a.createElement("span",{className:p.a.slider}))):t=r.a.createElement("input",{type:e.type,id:e.id,value:e.value,onChange:e.onChange,onClick:e.onClick,className:[e.clName,p.a[e.isInvalid]].join(" "),name:e.name,disabled:d}),r.a.createElement("div",{key:e.key,className:[p.a.formField,"col-"+n,p.a[e.mainClassName]].join(" ")},r.a.createElement("label",{className:p.a[o]},r.a.createElement("div",{className:p.a[c]},e.text),t,a))},_=t(15),v=t.n(_),N=function(e){var a=e.prod;return r.a.createElement("label",{className:v.a.checkboxContainer,key:a},r.a.createElement("input",{type:"checkbox",id:a,onChange:e.checkProductToDelete,checked:e.checked}),r.a.createElement("span",{className:v.a.prodName},a),r.a.createElement("span",{className:v.a.checkmark}))},k=t(2),f=t.n(k),E=function(e){var a=r.a.createElement("span",{className:["categoryName",e.clickedCategoryHue].join(" ")},e.categoryClicked.toUpperCase()),t=[];for(var o in e.productsToDelete)t.push(r.a.createElement(N,{key:o,prod:o,checked:e.productsToDelete[o],checkProductToDelete:e.checkProductToDelete}));for(var c=[],n=0;n<=36;n++){var d="hue-".concat(10*n),i=d===e.newCategoryHue?"chosenHue":"";c.push(r.a.createElement("div",{className:["colorSwatch",d,i].join(" "),id:d,key:d,onClick:e.colorSwatchClicked}))}var s=r.a.createElement("div",{className:"row"},r.a.createElement(b,{id:"newProductName",text:"Podaj nazw\u0119 produktu",width:"9",value:e.newProductName,isInvalid:e.categoryNameError.newProductName,onChange:e.handleInputChange}),r.a.createElement(b,{id:"newProductToBuy",text:"Kupi\u0107?",type:"switch",width:"3",mainClassName:"switchContainer",onChange:e.handleInputChange}));return r.a.createElement("div",{className:[f.a.backDrop,f.a[e.isModalVisible]].join(" "),onClick:e.hideBackDrop},r.a.createElement("div",{className:[f.a.modalWindow,f.a[e.isModalVisible],f.a.tabs,f.a[e.addNewCategoryVisible]].join(" ")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:[f.a.afterTab,f.a.addProduct,f.a[e.tabToShow]].join(" ")}),r.a.createElement("div",{className:[f.a.tab,f.a.addProduct,f.a[e.tabToShow]].join(" "),id:"show_addProduct",onClick:e.tabClicked},r.a.createElement("div",null)),r.a.createElement("div",{className:[f.a.afterTab,f.a.addProduct,f.a.deleteProducts,f.a[e.tabToShow]].join(" ")}),r.a.createElement("div",{className:[f.a.tab,f.a.deleteProducts,f.a[e.tabToShow]].join(" "),id:"show_deleteProducts",onClick:e.tabClicked},r.a.createElement("div",null)),r.a.createElement("div",{className:[f.a.afterTab,f.a.deleteProducts,f.a.editCategory,f.a[e.tabToShow]].join(" ")}),r.a.createElement("div",{className:[f.a.tab,f.a.editCategory,f.a[e.tabToShow]].join(" "),id:"show_editCategory",onClick:e.tabClicked},r.a.createElement("div",null)),r.a.createElement("div",{className:[f.a.afterTab,f.a.editCategory,f.a[e.tabToShow]].join(" ")})),r.a.createElement("div",{className:f.a.hideBackDrop,onClick:e.hideBackDrop}),r.a.createElement("h3",null,"Kategoria ",a),r.a.createElement("form",{onSubmit:e.submitNewProduct,className:[f.a.addProduct,f.a[e.tabToShow]].join(" ")},r.a.createElement("h4",null,"Dodaj nowy produkt"),s,r.a.createElement(b,{id:"newProductNameSubmit",clName:"hue-120",type:"submit",value:"Dodaj produkt"})),r.a.createElement("form",{onSubmit:e.deleteSelectedProducts,className:[f.a.deleteProducts,f.a[e.tabToShow]].join(" ")},r.a.createElement("h4",null,"Usu\u0144 produkt/y"),t,r.a.createElement(b,{id:"deleteProductFromCategory",type:"submit",clName:"hue-0",value:"Usu\u0144 zaznaczone produkty"})),r.a.createElement("form",{onSubmit:e.submitCategoryChange,className:[f.a.editCategory,f.a[e.tabToShow]].join(" ")},r.a.createElement("h4",null,"Edytuj nazw\u0119 i kolor"),r.a.createElement(b,{id:"newCategoryName",text:"Nowa nazwa kategorii",value:e.newCategoryName,onChange:e.handleInputChange}),r.a.createElement("div",{className:[f.a.colorSwatchesRow].join(" ")},c),r.a.createElement(b,{id:"newCategoryNameSubmit",type:"submit",clName:"hue-30",value:"Zmie\u0144 nazw\u0119 i / lub kolor kategorii"}))),r.a.createElement("div",{className:[f.a.modalWindow,f.a[e.isModalVisible],f.a.addCategory,f.a[e.addNewCategoryVisible]].join(" ")},r.a.createElement("div",{className:f.a.hideBackDrop,onClick:e.hideBackDrop}),r.a.createElement("h2",null,"Dodaj kategori\u0119"),r.a.createElement("form",{onSubmit:e.submitNewCategoryToDB,className:[f.a.addProduct,f.a[e.tabToShow]].join(" ")},r.a.createElement(b,{id:"addNewCategory",text:"Wybierz nazw\u0119 i kolor nowej kategorii",value:e.addNewCategory,isInvalid:e.categoryNameError.addNewCategory,onChange:e.handleInputChange}),r.a.createElement("div",{className:[f.a.colorSwatchesRow,f.a[e.categoryNameError.addNewCategoryColor]].join(" ")},c),s,r.a.createElement(b,{id:"newProductNameSubmit",clName:"hue-120",type:"submit",value:"Podaj nazw\u0119 i kolor kategorii oraz produkt"}))))},S=t(12);S.initializeApp({apiKey:"AIzaSyB_psG_2HT8VisbjB3szsMjZsnlfQIS9ko",authDomain:"what-to-buy-94750.firebaseapp.com",databaseURL:"https://what-to-buy-94750.firebaseio.com",projectId:"what-to-buy-94750",storageBucket:"what-to-buy-94750.appspot.com",messagingSenderId:"194092546135",appId:"1:194092546135:web:7661e65a00a7f2aa390b12",measurementId:"G-XWZR1H0ZMY"});var P=S.database();new S.auth.GoogleAuthProvider;P.ref("categories").once("value").then((function(e){var a=e.val(),t={};Object.keys(a).forEach((function(e){t[e]=1})),P.ref("categoryNames").set(t)}));var T=t(9),j=t.n(T),D=function(e){Object(m.a)(t,e);var a=Object(h.a)(t);function t(){var e;Object(l.a)(this,t);for(var o=arguments.length,c=new Array(o),n=0;n<o;n++)c[n]=arguments[n];return(e=a.call.apply(a,[this].concat(c))).state={categories:{"Pobieranie danych":{products:{"prosz\u0119_czeka\u0107...":1}}},fontSize:16,undo:[],redo:[],newCategoryName:"",addNewCategory:"",categoryNameError:{},allFieldsValid:!0,newProductName:"",newProductToBuy:0,isModalVisible:"",categoryClicked:"",clickedCategoryHue:"",newCategoryHue:"",tabToShow:"show_addProduct",productsToDelete:{},addNewCategoryVisible:"showTabs"},e.dbRef="categories",e.changeFontSize=function(a){e.setState({fontSize:parseInt(e.state.fontSize)+parseInt(a.target.dataset.value)})},e.funcUndoRedo=function(a){var t,o,r=a.target.dataset.dir,c=Object(s.a)(e.state.undo),n=Object(s.a)(e.state.redo);"u"===r&&(t=c.pop(),n.push(t),P.ref("".concat(e.dbRef,"/").concat(t.category,"/products/").concat(t.name)).set(t.value)),"r"===r&&((o=n.pop()).value=0===o.value?1:0,c.push(o),P.ref("".concat(e.dbRef,"/").concat(o.category,"/products/").concat(o.name)).set(o.value)),e.setState({undo:c,redo:n})},e.moveProduct=function(a){var t=a.target.dataset.name,o=a.target.dataset.category,r=0===parseInt(a.target.dataset.value)?1:0;P.ref("".concat(e.dbRef,"/").concat(o,"/products/").concat(t)).set(r);var c=Object(s.a)(e.state.undo);c.push({name:t,category:o,value:parseInt(a.target.dataset.value)}),e.setState({undo:c,redo:[]})},e.updateProductsFromDb=function(a){P.ref(a).on("value",(function(t){var o=t.val();e.setState(Object(i.a)({},a,o))}),(function(e){console.log(e.code,e)}))},e.handleInputChange=function(a){var t,o=a.target.value,r=Object(d.a)({},e.state.categoryNameError);if("newProductName"===a.target.id){if(o=o.toLowerCase(),r.newProductName="",""===o&&(r.newProductName="invalid"),e.state.categoryClicked)for(var c in e.state.categories[e.state.categoryClicked].products)o===c&&(r.newProductName="invalid")}else if("newProductToBuy"===a.target.id)o=1===e.state.newProductToBuy?0:1;else if("addNewCategory"===a.target.id||"newCategoryName"===a.target.id)for(var n in o=o.toUpperCase(),r.addNewCategory="",e.state.categories)n.toUpperCase()===o&&(r.addNewCategory="invalid");else o=o.toUpperCase();e.setState((t={},Object(i.a)(t,a.target.id,o),Object(i.a)(t,"categoryNameError",r),t))},e.checkProductToDelete=function(a){var t=Object(d.a)({},e.state.productsToDelete);t[a.target.id]=!Object(d.a)({},e.state.productsToDelete)[a.target.id],e.setState({productsToDelete:t})},e.handleCategoryClick=function(a){var t=a.target.dataset.name,o={};for(var r in e.state.categories[t].products)o[r]=!1;e.setState({productsToDelete:o,isModalVisible:"visible",addNewCategoryVisible:"showTabs",categoryClicked:t,clickedCategoryHue:a.target.dataset.hue,newCategoryHue:a.target.dataset.hue,newCategoryName:t})},e.hideBackDrop=function(a){a.target===a.currentTarget&&e.setState({isModalVisible:""})},e.removeDiacrits=function(e){return e.replace(/[\u0105\u0107\u0119\u0142\u0144\xf3\u015b\u017a\u017c]/gi,"x")},e.categoryElement=function(a,t,o,c){return r.a.createElement("div",{"data-name":o,className:["categoryName",c,j.a.categoryName,e.removeDiacrits(o)].join(" "),onClick:e.handleCategoryClick,"data-hue":c,key:a+t},o)},e.submitCategoryChange=function(a){a.preventDefault();var t=Object(d.a)({},e.state.categories),o=Object(d.a)({},t[e.state.categoryClicked]);delete t[e.state.categoryClicked];var r=e.state.newCategoryName.toLowerCase();t[r]=o,t[r].hue=parseInt(e.state.newCategoryHue.slice(4)),e.setState({isModalVisible:!1,categoryClicked:""}),P.ref("".concat(e.dbRef,"/")).set(t)},e.submitNewCategoryToDB=function(a){a.preventDefault();var t=e.state,o=t.addNewCategory,r=t.newCategoryHue,c=t.newProductName;if(console.log(o,r,c,""!==o,""!==r,""!==c),o&&""!==o&&r&&""!==r&&c&&""!==c){var n={hue:r.slice(4),products:Object(i.a)({},c,e.state.newProductToBuy)};console.log(n),P.ref("".concat(e.dbRef,"/").concat(o.toLowerCase())).set(n),e.setState({isModalVisible:!1,addNewCategory:"",newCategoryHue:"",newProductName:""})}},e.submitNewProduct=function(a){a.preventDefault();var t=Object(d.a)({},e.state.categories[e.state.categoryClicked].products);t[e.state.newProductName]=e.state.newProductToBuy,P.ref("".concat(e.dbRef,"/").concat(e.state.categoryClicked,"/products/")).set(t)},e.deleteSelectedProducts=function(a){a.preventDefault();var t=Object(d.a)({},e.state.categories),o=Object(d.a)({},t[e.state.categoryClicked].products);for(var r in o)e.state.productsToDelete[r]&&delete o[r];e.setState({isModalVisible:!1}),P.ref("".concat(e.dbRef,"/").concat(e.state.categoryClicked,"/products/")).set(o)},e.tabClicked=function(a){e.setState({tabToShow:a.currentTarget.id})},e.colorSwatchClicked=function(a){e.setState({newCategoryHue:a.target.id})},e.addNewCategoryClicked=function(a){e.setState({isModalVisible:"visible",addNewCategoryVisible:"showAddCategory",addNewCategory:"",newCategoryName:"",newCategoryHue:"",newProductName:"",newCategoryNameError:"",categoryClicked:""})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.updateProductsFromDb("".concat(this.dbRef))}},{key:"render",value:function(){var e=this,a=[],t=[];return Object.keys(this.state.categories).forEach((function(o,c){var n=e.state.categories[o],d="hue-"+n.hue,i=[],s=[];Object.keys(n.products).forEach((function(a,t){var c=r.a.createElement("div",{className:["product",d,j.a.product].join(" "),key:e.removeDiacrits(o)+t,"data-name":a,"data-category":o,onClick:e.moveProduct,"data-value":n.products[a]},a.toLowerCase());n.products[a]?i.push(c):s.push(c)})),i.length>0&&a.push(e.categoryElement(a,c,o,d)),a.push.apply(a,i),s.length>0&&t.push(e.categoryElement(t,c,o,d)),t.push.apply(t,s)})),console.log(this.state),r.a.createElement("div",{className:j.a.list,style:{fontSize:this.state.fontSize}},r.a.createElement(y,{changeFontSize:this.changeFontSize,funcUndoRedo:this.funcUndoRedo,undo:0===this.state.undo.length,redo:0===this.state.redo.length}),r.a.createElement("p",null,"Do kupienia:"),r.a.createElement("div",{className:j.a.toBuy},a),r.a.createElement("hr",null),r.a.createElement("div",{className:j.a.theRest},t),r.a.createElement("div",{className:j.a.addNewCategoryRow},r.a.createElement("div",{className:j.a.addNewCategory,id:"addNewCategory",onClick:this.addNewCategoryClicked},r.a.createElement("span",null,"+")," DODAJ KATEGORI\u0118")),r.a.createElement(E,{categoryClicked:this.state.categoryClicked,newCategoryName:this.state.newCategoryName,newProductName:this.state.newProductName,hideBackDrop:this.hideBackDrop,handleInputChange:this.handleInputChange,submitCategoryChange:this.submitCategoryChange,submitNewProduct:this.submitNewProduct,productsToDelete:this.state.productsToDelete,deleteSelectedProducts:this.deleteSelectedProducts,isModalVisible:this.state.isModalVisible,colorSwatchClicked:this.colorSwatchClicked,clickedCategoryHue:this.state.clickedCategoryHue,newCategoryHue:this.state.newCategoryHue,checkProductToDelete:this.checkProductToDelete,tabClicked:this.tabClicked,tabToShow:this.state.tabToShow,addNewCategoryVisible:this.state.addNewCategoryVisible,categoryNameError:this.state.categoryNameError,submitNewCategoryToDB:this.submitNewCategoryToDB}))}}]),t}(o.Component);t(41);var M=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports={formField:"InputField_formField__1aeAu",answerRadio:"InputField_answerRadio__38Ff8",checkmark:"InputField_checkmark__2FKrn",invalid:"InputField_invalid__1BJoB",submit:"InputField_submit__2j43y",switchContainer:"InputField_switchContainer__3xTYm",switch:"InputField_switch__3PWGH",moveHigher:"InputField_moveHigher__1ohim",slider:"InputField_slider__3212e"}},9:function(e,a,t){e.exports={list:"ShowList_list__3ulZj",categoryName:"ShowList_categoryName__30IIg",category:"ShowList_category__2UWnV",product:"ShowList_product__KkwLr",toBuy:"ShowList_toBuy__PJrhx",theRest:"ShowList_theRest__1Ih5C",addNewCategoryRow:"ShowList_addNewCategoryRow__2s_ZB",addNewCategory:"ShowList_addNewCategory__1vPdV"}}},[[25,1,2]]]);
//# sourceMappingURL=main.0bf1e998.chunk.js.map