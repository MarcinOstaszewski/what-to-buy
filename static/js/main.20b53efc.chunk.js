(this["webpackJsonpwhat-to-buy"]=this["webpackJsonpwhat-to-buy"]||[]).push([[0],{11:function(e,t,a){e.exports={list:"ShowList_list__3ulZj",categoryName:"ShowList_categoryName__30IIg",category:"ShowList_category__2UWnV",product:"ShowList_product__KkwLr",toBuy:"ShowList_toBuy__PJrhx",theRest:"ShowList_theRest__1Ih5C"}},14:function(e,t,a){e.exports={TopMenu:"TopMenu_TopMenu__1GqW0",true:"TopMenu_true__vXCSI"}},15:function(e,t,a){e.exports={checkboxContainer:"ProductWithCheckbox_checkboxContainer__1UHTy",checkmark:"ProductWithCheckbox_checkmark__1RLcK",prodName:"ProductWithCheckbox_prodName__2N05W"}},2:function(e,t,a){e.exports={backDrop:"Modal_backDrop__1X4vu",visible:"Modal_visible__2SMZK",modalWindow:"Modal_modalWindow__16Crz",tab:"Modal_tab__38cSf",addProduct:"Modal_addProduct__2k_IU",deleteProducts:"Modal_deleteProducts__5ArGR",editCategory:"Modal_editCategory__3GXGk",show_addProduct:"Modal_show_addProduct__2PVRr",show_deleteProducts:"Modal_show_deleteProducts__e1m7y",show_editCategory:"Modal_show_editCategory__RWqzW",afterTab:"Modal_afterTab__3nw9Q",newCategoryName:"Modal_newCategoryName__e8lG8",hideBackDrop:"Modal_hideBackDrop__1qf7m"}},25:function(e,t,a){e.exports=a(42)},30:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var o=a(1),c=a.n(o),r=a(20),n=a.n(r),i=(a(30),a(6)),d=a(12),s=a(16),l=a(21),u=a(22),m=a(24),h=a(23),p=a(14),g=a.n(p),b=function(e){return c.a.createElement("div",{id:"dddafad",className:g.a.TopMenu},c.a.createElement("div",{onClick:e.funcUndoRedo,"data-dir":"u",className:g.a[e.undo],disabled:0===e.undo},"Undo"),c.a.createElement("div",{onClick:e.funcUndoRedo,"data-dir":"r",className:g.a[e.redo],disabled:0===e.redo},"Redo"),c.a.createElement("div",{"data-value":1,onClick:e.changeFontSize},"A+"),c.a.createElement("div",{"data-value":-1,onClick:e.changeFontSize},"a-"))},y=a(9),k=a.n(y),w=function(e){var t;"radio"===e.type&&(t=c.a.createElement("span",{className:k.a.checkmark}));var a,o,r,n=e.width?e.width:12,i=e.disabled;return"switch"===e.type?(o="switch",r="moveHigher",a=c.a.createElement("div",null,c.a.createElement("input",{id:e.id,value:e.value,type:"checkbox",onChange:e.onChange}),c.a.createElement("span",{className:k.a.slider}))):a=c.a.createElement("input",{type:e.type,id:e.id,value:e.value,onChange:e.onChange,onClick:e.onClick,className:e.clName,name:e.name,disabled:i}),c.a.createElement("div",{key:e.key,className:[k.a.formField,"col-"+n,k.a[e.mainClassName]].join(" ")},c.a.createElement("label",{className:k.a[o]},c.a.createElement("div",{className:k.a[r]},e.text),a,t))},C=a(15),_=a.n(C),v=function(e){var t=e.prod;return c.a.createElement("label",{className:_.a.checkboxContainer,key:t},c.a.createElement("input",{type:"checkbox",id:t,onChange:e.checkProductToDelete,checked:e.checked}),c.a.createElement("span",{className:_.a.prodName},t),c.a.createElement("span",{className:_.a.checkmark}))},f=a(2),N=a.n(f),E=function(e){var t=c.a.createElement("span",{className:["categoryName",e.clickedCategoryHue].join(" ")},e.categoryClicked.toUpperCase()),a=[];for(var o in e.productsToDelete)a.push(c.a.createElement(v,{key:o,prod:o,checked:e.productsToDelete[o],checkProductToDelete:e.checkProductToDelete}));for(var r=[],n=0;n<=36;n++){var i="hue-".concat(10*n),d=i===e.newCategoryHue?"chosenHue":"";r.push(c.a.createElement("div",{className:["colorSwatch",i,d].join(" "),id:i,key:i,onClick:e.colorSwatchClicked}))}return c.a.createElement("div",{className:[N.a.backDrop,N.a[e.isModalVisible]].join(" "),onClick:e.hideBackDrop},c.a.createElement("div",{className:[N.a.modalWindow,N.a[e.isModalVisible]].join(" ")},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:[N.a.afterTab,N.a.addProduct,N.a[e.tabToShow]].join(" ")}),c.a.createElement("div",{className:[N.a.tab,N.a.addProduct,N.a[e.tabToShow]].join(" "),id:"show_addProduct",onClick:e.tabClicked},c.a.createElement("div",null)),c.a.createElement("div",{className:[N.a.afterTab,N.a.addProduct,N.a.deleteProducts,N.a[e.tabToShow]].join(" ")}),c.a.createElement("div",{className:[N.a.tab,N.a.deleteProducts,N.a[e.tabToShow]].join(" "),id:"show_deleteProducts",onClick:e.tabClicked},c.a.createElement("div",null)),c.a.createElement("div",{className:[N.a.afterTab,N.a.deleteProducts,N.a.editCategory,N.a[e.tabToShow]].join(" ")}),c.a.createElement("div",{className:[N.a.tab,N.a.editCategory,N.a[e.tabToShow]].join(" "),id:"show_editCategory",onClick:e.tabClicked},c.a.createElement("div",null)),c.a.createElement("div",{className:[N.a.afterTab,N.a.editCategory,N.a[e.tabToShow]].join(" ")})),c.a.createElement("div",{className:N.a.hideBackDrop,onClick:e.hideBackDrop}),c.a.createElement("form",{onSubmit:e.submitNewProduct,className:[N.a.addProduct,N.a[e.tabToShow]].join(" ")},c.a.createElement("h4",null,"Dodaj produkt do kategorii ",t),c.a.createElement("div",{className:"row"},c.a.createElement(w,{id:"newProductName",text:"Podaj nazw\u0119 produktu",width:"9",value:e.newProductName,onChange:e.handleInputChange}),c.a.createElement(w,{id:"newProductToBuy",text:"Kupi\u0107?",type:"switch",width:"3",mainClassName:"switchContainer",onChange:e.handleInputChange})),c.a.createElement(w,{id:"newProductNameSubmit",clName:"hue-120",type:"submit",value:"Dodaj produkt"})),c.a.createElement("form",{onSubmit:e.deleteSelectedProducts,className:[N.a.deleteProducts,N.a[e.tabToShow]].join(" ")},c.a.createElement("h4",null,"Usu\u0144 produkt/y z kategorii ",t),a,c.a.createElement(w,{id:"deleteProductFromCategory",type:"submit",clName:"hue-0",value:"Usu\u0144 zaznaczone produkty"})),c.a.createElement("form",{onSubmit:e.submitCategoryChange,className:[N.a.editCategory,N.a[e.tabToShow]].join(" ")},c.a.createElement("h4",null,"Edytuj kategori\u0119 ",t),c.a.createElement(w,{id:"newCategoryName",text:"Nowa nazwa kategorii",value:e.newCategoryName,onChange:e.handleInputChange}),c.a.createElement("div",{className:"row mt-5"},r),c.a.createElement(w,{id:"newCategoryNameSubmit",type:"submit",clName:"hue-30",value:"Zmie\u0144 nazw\u0119 i / lub kolor kategorii"}))))},P=a(10);P.initializeApp({apiKey:"AIzaSyB_psG_2HT8VisbjB3szsMjZsnlfQIS9ko",authDomain:"what-to-buy-94750.firebaseapp.com",databaseURL:"https://what-to-buy-94750.firebaseio.com",projectId:"what-to-buy-94750",storageBucket:"what-to-buy-94750.appspot.com",messagingSenderId:"194092546135",appId:"1:194092546135:web:7661e65a00a7f2aa390b12",measurementId:"G-XWZR1H0ZMY"});var S=P.database();new P.auth.GoogleAuthProvider;S.ref("categories").once("value").then((function(e){var t=e.val(),a={};Object.keys(t).forEach((function(e){a[e]=1})),S.ref("categoryNames").set(a)}));var T=a(11),j=a.n(T),D=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={categories:{"Pobieranie danych":{products:{"prosz\u0119_czeka\u0107...":1}}},fontSize:16,undo:[],redo:[],newCategoryName:"",newProductName:"",newProductToBuy:0,isModalVisible:"",categoryClicked:"",clickedCategoryHue:"",newCategoryHue:"",tabToShow:"show_addProduct",productsToDelete:{}},e.dbRef="categories",e.changeFontSize=function(t){console.log(parseInt(t.target.dataset)),e.setState({fontSize:parseInt(e.state.fontSize)+parseInt(t.target.dataset.value)})},e.funcUndoRedo=function(t){var a,o,c=t.target.dataset.dir,r=Object(s.a)(e.state.undo),n=Object(s.a)(e.state.redo);"u"===c&&(a=r.pop(),n.push(a),S.ref("".concat(e.dbRef,"/").concat(a.category,"/products/").concat(a.name)).set(a.value)),"r"===c&&((o=n.pop()).value=0===o.value?1:0,r.push(o),S.ref("".concat(e.dbRef,"/").concat(o.category,"/products/").concat(o.name)).set(o.value)),console.log(a,o,r,n),e.setState({undo:r,redo:n})},e.moveProduct=function(t){var a=t.target.dataset.name,o=t.target.dataset.category,c=0===parseInt(t.target.dataset.value)?1:0;S.ref("".concat(e.dbRef,"/").concat(o,"/products/").concat(a)).set(c);var r=Object(s.a)(e.state.undo);r.push({name:a,category:o,value:parseInt(t.target.dataset.value)}),e.setState({undo:r})},e.updateProductsFromDb=function(t){S.ref(t).on("value",(function(a){var o=a.val();e.setState(Object(d.a)({},t,o))}),(function(e){console.log(e.code,e)}))},e.handleInputChange=function(t){var a=t.target.value;a="newProductName"===t.target.id?a.toLowerCase():"newProductToBuy"===t.target.id?1===e.state.newProductToBuy?0:1:a.toUpperCase(),e.setState(Object(d.a)({},t.target.id,a))},e.checkProductToDelete=function(t){console.log(t.target,t.target.id,Object(i.a)({},e.state.productsToDelete)[t.target.id]);var a=Object(i.a)({},e.state.productsToDelete);a[t.target.id]=!Object(i.a)({},e.state.productsToDelete)[t.target.id],e.setState({productsToDelete:a})},e.handleCategoryClick=function(t){var a=t.target.dataset.name,o={};for(var c in e.state.categories[a].products)o[c]=!1;e.setState({productsToDelete:o,isModalVisible:"visible",categoryClicked:a,clickedCategoryHue:t.target.dataset.hue,newCategoryHue:t.target.dataset.hue,newCategoryName:a.toUpperCase()})},e.hideBackDrop=function(t){t.target===t.currentTarget&&e.setState({isModalVisible:""})},e.removeDiacrits=function(e){return e.replace(/[\u0105\u0107\u0119\u0142\u0144\xf3\u015b\u017a\u017c]/gi,"x")},e.categoryElement=function(t,a,o,r){return c.a.createElement("div",{"data-name":o,className:["categoryName",r,j.a.categoryName,e.removeDiacrits(o)].join(" "),onClick:e.handleCategoryClick,"data-hue":r,key:t+a},o)},e.submitCategoryChange=function(t){t.preventDefault();var a=Object(i.a)({},e.state.categories),o=Object(i.a)({},a[e.state.categoryClicked]);delete a[e.state.categoryClicked];var c=e.state.newCategoryName.toLowerCase();a[c]=o,a[c].hue=parseInt(e.state.newCategoryHue.slice(4)),console.log(a[c].hue,e.state.newCategoryHue.slice(4)),e.setState({isModalVisible:!1}),S.ref("".concat(e.dbRef,"/")).set(a)},e.submitNewProduct=function(t){t.preventDefault();var a=Object(i.a)({},e.state.categories[e.state.categoryClicked].products);a[e.state.newProductName]=e.state.newProductToBuy,console.log(e.state.newProductName),S.ref("".concat(e.dbRef,"/").concat(e.state.categoryClicked,"/products/")).set(a)},e.deleteSelectedProducts=function(t){t.preventDefault();var a=Object(i.a)({},e.state.categories),o=Object(i.a)({},a[e.state.categoryClicked].products);for(var c in console.log(o,e.state.productsToDelete),o)e.state.productsToDelete[c]&&delete o[c];e.setState({isModalVisible:!1}),S.ref("".concat(e.dbRef,"/").concat(e.state.categoryClicked,"/products/")).set(o)},e.tabClicked=function(t){console.log(t.currentTarget.id),e.setState({tabToShow:t.currentTarget.id})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.updateProductsFromDb("".concat(this.dbRef))}},{key:"render",value:function(){var e=this,t=[],a=[];return Object.keys(this.state.categories).forEach((function(o,r){var n=e.state.categories[o],i="hue-"+n.hue,d=[],s=[];Object.keys(n.products).forEach((function(t,a){var r=c.a.createElement("div",{className:["product",i,j.a.product].join(" "),key:e.removeDiacrits(o)+a,"data-name":t,"data-category":o,onClick:e.moveProduct,"data-value":n.products[t]},t.toLowerCase());n.products[t]?d.push(r):s.push(r)})),d.length>0&&t.push(e.categoryElement(t,r,o,i)),t.push.apply(t,d),s.length>0&&a.push(e.categoryElement(a,r,o,i)),a.push.apply(a,s)})),console.log(this.state),c.a.createElement("div",{className:j.a.list,style:{fontSize:this.state.fontSize}},c.a.createElement(b,{changeFontSize:this.changeFontSize,funcUndoRedo:this.funcUndoRedo,undo:0===this.state.undo.length,redo:0===this.state.redo.length}),c.a.createElement("p",null,"Do kupienia:"),c.a.createElement("div",{className:j.a.toBuy},t),c.a.createElement("hr",null),c.a.createElement("div",{className:j.a.theRest},a),c.a.createElement(E,{categoryClicked:this.state.categoryClicked,newCategoryName:this.state.newCategoryName,newProductName:this.state.newProductName,hideBackDrop:this.hideBackDrop,handleInputChange:this.handleInputChange,submitCategoryChange:this.submitCategoryChange,submitNewProduct:this.submitNewProduct,productsToDelete:this.state.productsToDelete,deleteSelectedProducts:this.deleteSelectedProducts,isModalVisible:this.state.isModalVisible,colorSwatchClicked:this.colorSwatchClicked,clickedCategoryHue:this.state.clickedCategoryHue,newCategoryHue:this.state.newCategoryHue,checkProductToDelete:this.checkProductToDelete,tabClicked:this.tabClicked,tabToShow:this.state.tabToShow}))}}]),a}(o.Component);a(41);var I=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={formField:"InputField_formField__1aeAu",answerRadio:"InputField_answerRadio__38Ff8",checkmark:"InputField_checkmark__2FKrn",invalid:"InputField_invalid__1BJoB",submit:"InputField_submit__2j43y",switchContainer:"InputField_switchContainer__3xTYm",switch:"InputField_switch__3PWGH",moveHigher:"InputField_moveHigher__1ohim",slider:"InputField_slider__3212e"}}},[[25,1,2]]]);
//# sourceMappingURL=main.20b53efc.chunk.js.map